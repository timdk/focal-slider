var FocalSlider=function(){function t(t,e){this.image=t,this.focalPoint=e,this.index=null,this.parent=null}function e(t){this.containerSelector=t.container,this.container=null,this.canvas=null,this.context=null,this.slides=[],this.currentSlideIndex=null,this.numSlides=0,this.slideDuration=t.slideDuration||5e3,this.autoPlay=t.autoPlay!==!1,this.transitionPercent=0,this.createCanvas(),t.slides&&t.slides.length>0&&this.loadSlides(t.slides)}function i(t,e){t.save(),t.globalAlpha=.8,t.drawImage(s,0,e.y/2-16),t.drawImage(r,e.x-32,e.y/2-16),t.restore()}function n(t,e){var i=t.getBoundingClientRect(),n=e.clientX-i.left,s=e.clientY-i.top;return{x:n,y:s}}var s=new Image;s.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA8UlEQVRYhd2X0QYCQRSG10pPkCRJz5QkXaQXSrJWkvREe5EkSdI7dLfyddFGRrszy5456WevZna/zxk7cyYIKg4QAhEwqPrbrvANr6TAWAvOh8TEF3zL9zyAqRb8nQSoacF3QEMKbq65mb0m/AA0teBHoCUFX1vgJ6AtBV/9MvwMdP4SvtSCB9rw2Ac8LBi7W96tZ49MsirMLFW4AT1piblF4upDYuEg0ZWWiCwSFx8SXv6MIgm9XbGkhMyhZEjYjmWZnsCQcGlMqu+KDAlbJWT6wpISCVC07YtK+Lmi5UikwEgcniORAkNvcEMiBvou85/zmmf/a5dcPQAAAABJRU5ErkJggg==";var r=new Image;r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA7klEQVRYhe2X0QYCQRSGx0qXK0mPlGSlN1xJkqyeIF0mSZKeJRFfFy1t2m0OO2dmL/qvl++b3ePsP8YIAgyAFGhJnncaYATceGXlVQJIgDuf8SMBTErgfiQAA2wr4N4kYmAXWqIDHEJLdIGjRWLpQ+IUWqIHnJsgcbFILLQl+gKJeVMkotASs79EnmmVhAuzyBhjG7iHA8538tNfLadPVT5B3VdfFy5ZSDrDh2wl62xDQv6UhHCdboCsE6jBJa0o04LHwD4k3FZK10BbA26ATRB4QeLXxUQXXpAYl0hkXuAFiYT35VRn4AQSQ5R63hNnHGgduYs84gAAAABJRU5ErkJggg==";var a={TOP_LEFT:0,TOP_MIDDLEe:1,TOP_RIGHT:2,MIDDLE_LEFT:3,MIDDLE:4,MIDDLE_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_MIDDLE:7,BOTTOM_RIGHT:8},o=function(t){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();return t.prototype.show=function(){this.parent.showSlide(this)},e.prototype.addSlide=function(t){this.slides.push(t),this.numSlides=this.slides.length,t.parent=this,t.index=this.numSlides-1},e.prototype.showSlide=function(t){var e;void 0===t||null===t?(e=this.currentSlideIndex,t=this.slides[e]):"number"==typeof t?(e=t,t=this.slides[e]):e=t.index,this.drawImage(t),this.currentSlideIndex=e},e.prototype.next=function(){var t=this.slides[this.currentSlideIndex];++this.currentSlideIndex===this.numSlides&&(this.currentSlideIndex=0);var e=this.slides[this.currentSlideIndex];this.fadeTransition(t,e)},e.prototype.previous=function(){var t=this.slides[this.currentSlideIndex];--this.currentSlideIndex==-1&&(this.currentSlideIndex=this.numSlides-1);var e=this.slides[this.currentSlideIndex];this.fadeTransition(t,e)},e.prototype.start=function(t){"number"!=typeof t?t=this.slideDuration:this.slideDuration=t,this.timer=setInterval(this.next.bind(this),t)},e.prototype.stop=function(){clearInterval(this.timer),delete this.timer},e.prototype.restart=function(){this.stop(),this.start()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getContext=function(){return this.context||(this.context=this.canvas.getContext("2d")),this.context},e.prototype.getCanvasSize=function(){return{x:this.getCanvas().scrollWidth,y:this.getCanvas().scrollHeight}},e.prototype.fadeTransition=function(t,e){return this.transitionPercent>100?(this.transitionPercent=0,void(void 0!==this.timer&&this.restart())):(o(this.fadeTransition.bind(this,t,e)),this.drawImage(e,this.transitionPercent/100),this.drawImage(t,1-this.transitionPercent/100),void(this.transitionPercent+=4))},e.prototype.drawImage=function(t,e){void 0===e&&(e=1);var n,s,r=t.image.width,o=t.image.height,d=r/o,c=this.getCanvasSize(),h=c.x,l=c.y,u=h/l;u<d?(n=r*l/o,s=l):(n=h,s=o*h/r);var A=0,v=0;switch(t.focalPoint){case a.TOP_RIGHT:case a.MIDDLE_RIGHT:case a.BOTTOM_RIGHT:n>h&&(A=h-n);break;case a.TOP_MIDDLE:case a.MIDDLE:case a.BOTTOM_MIDDLE:n>h&&(A=(h-n)/2)}switch(t.focalPoint){case a.BOTTOM_LEFT:case a.BOTTOM_MIDDLE:case a.BOTTOM_RIGHT:s>l&&(v=l-s);break;case a.MIDDLE_LEFT:case a.MIDDLE:case a.MIDDLE_RIGHT:s>l&&(v=(l-s)/2)}var m=this.getContext();m.globalAlpha=e,m.drawImage(t.image,A,v,n,s),i(m,c)},e.prototype.createCanvas=function(t){t?this.containerSelector=t:t=this.containerSelector,this.container=document.querySelector(t),this.canvas=document.createElement("canvas"),this.setCanvasSize(),this.container.appendChild(this.canvas),this.addEventListeners()},e.prototype.addEventListeners=function(){var t=this;window.addEventListener("resize",function(){t.resize()},!1),window.addEventListener("blur",function(){"undefined"!=typeof t.timer&&(t.resumeTimer=!0,t.stop())}),window.addEventListener("focus",function(){t.resumeTimer===!0&&(delete t.resumeTimer,t.start())}),this.canvas.addEventListener("click",function(e){if(0===t.transitionPercent){var i=n(t.canvas,e),s=t.getCanvasSize();i.x>0&&i.x<64?t.previous():i.x>s.x-64&&i.x<s.x&&t.next()}})},e.prototype.setCanvasSize=function(){this.canvas.width=this.container.clientWidth,this.canvas.height=this.container.clientHeight},e.prototype.resize=function(){this.setCanvasSize(),0===this.transitionPercent&&this.drawImage(this.slides[this.currentSlideIndex])},e.prototype.loadSlides=function(e,i){function n(){i<e.length-1&&s.loadSlides(e,++i)}void 0===i&&(i=0);var s=this,r=new Image;r.onload=function(){var o=e[i].focus.toUpperCase().replace("-","_"),d=new t(r,a[o]);s.addSlide(d),0===i&&(d.show(),s.autoPlay&&s.start()),n()},r.onerror=function(){console.error("Unable to load image "+i+" src: "+e[i].src),n()},r.src=e[i].src},e}();