var FocalSlider=function(){function t(t,e){this.image=t,this.focalPoint=e,this.index=null,this.parent=null}function e(t){this.containerSelector=t.container,this.container=null,this.canvas=null,this.context=null,this.slides=[],this.currentSlideIndex=null,this.numSlides=0,this.slideDuration=t.slideDuration||5e3,this.autoPlay=t.autoPlay!==!1,this.transitionPercent=0,this.createCanvas(),t.slides&&t.slides.length>0&&this.loadSlides(t.slides)}function i(t,e){t.save(),t.globalAlpha=.5,t.drawImage(A,0,e.y/2-16,32,32),t.drawImage(s,e.x-32,e.y/2-16,32,32),t.restore()}function n(t,e){var i=t.getBoundingClientRect(),n=e.clientX-i.left,A=e.clientY-i.top;return{x:n,y:A}}var A=new Image;A.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHbAAAB2wFX5YcfAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAC1QTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwDqzoAAAAA50Uk5TABscMTQ3QJ+ywMPT2/CI1HYCAAAAU0lEQVRIx2NgwApYZicw4AWx7xbglWe9966AgAFvBAgYcIiQAQqjBowaMGoAYQOYCRnAQcAAwgoIWkHQkYS9OWrEqBGjRhA2QoCyqplg5Y7UPAAAGyOXz5tPfLgAAAAASUVORK5CYII=";var s=new Image;s.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHbAAAB2wFX5YcfAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAC1QTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwDqzoAAAAA50Uk5TABscMTQ3QJ+ywMPT2/CI1HYCAAAAUElEQVRIx2NggAC2nQ4MeAHXu6v4FbC/exuAVwHjOUJG6BAygmnUiFEjRo2g3AgDQkY0UKaAkBUEHUnIm6MGjBowagCRFSvBqplg5Y6zeQAAXpuXz0b194wAAAAASUVORK5CYII=";var a={TOP_LEFT:0,TOP_MIDDLEe:1,TOP_RIGHT:2,MIDDLE_LEFT:3,MIDDLE:4,MIDDLE_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_MIDDLE:7,BOTTOM_RIGHT:8},r=function(t){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();return t.prototype.show=function(){this.parent.showSlide(this)},e.prototype.addSlide=function(t){this.slides.push(t),this.numSlides=this.slides.length,t.parent=this,t.index=this.numSlides-1},e.prototype.showSlide=function(t){var e;void 0===t||null===t?(e=this.currentSlideIndex,t=this.slides[e]):"number"==typeof t?(e=t,t=this.slides[e]):e=t.index,this.drawImage(t),this.currentSlideIndex=e},e.prototype.next=function(){var t=this.slides[this.currentSlideIndex];++this.currentSlideIndex===this.numSlides&&(this.currentSlideIndex=0);var e=this.slides[this.currentSlideIndex];this.fadeTransition(t,e)},e.prototype.previous=function(){var t=this.slides[this.currentSlideIndex];--this.currentSlideIndex==-1&&(this.currentSlideIndex=this.numSlides-1);var e=this.slides[this.currentSlideIndex];this.fadeTransition(t,e)},e.prototype.start=function(t){"number"!=typeof t?t=this.slideDuration:this.slideDuration=t,this.timer=setInterval(this.next.bind(this),t)},e.prototype.stop=function(){clearInterval(this.timer),delete this.timer},e.prototype.restart=function(){this.stop(),this.start()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getContext=function(){return this.context||(this.context=this.canvas.getContext("2d")),this.context},e.prototype.getCanvasSize=function(){return{x:this.getCanvas().scrollWidth,y:this.getCanvas().scrollHeight}},e.prototype.fadeTransition=function(t,e){return this.transitionPercent>100?(this.transitionPercent=0,void(void 0!==this.timer&&this.restart())):(r(this.fadeTransition.bind(this,t,e)),this.drawImage(t,this.transitionPercent/100),this.drawImage(e,1-this.transitionPerecent/100),void(this.transitionPercent+=4))},e.prototype.drawImage=function(t,e){void 0===e&&(e=1);var n,A,s=t.image.width,r=t.image.height,o=s/r,c=this.getCanvasSize(),h=c.x,d=c.y,l=h/d;l<o?(n=s*d/r,A=d):(n=h,A=r*h/s);var u=0,g=0;switch(t.focalPoint){case a.TOP_RIGHT:case a.MIDDLE_RIGHT:case a.BOTTOM_RIGHT:n>h&&(u=h-n);break;case a.TOP_MIDDLE:case a.MIDDLE:case a.BOTTOM_MIDDLE:n>h&&(u=(h-n)/2)}switch(t.focalPoint){case a.BOTTOM_LEFT:case a.BOTTOM_MIDDLE:case a.BOTTOM_RIGHT:A>d&&(g=d-A);break;case a.MIDDLE_LEFT:case a.MIDDLE:case a.MIDDLE_RIGHT:A>d&&(g=(d-A)/2)}var I=this.getContext();I.globalAlpha=e,I.drawImage(t.image,u,g,n,A),i(I,c)},e.prototype.createCanvas=function(t){t?this.containerSelector=t:t=this.containerSelector,this.container=document.querySelector(t),this.canvas=document.createElement("canvas"),this.setCanvasSize(),this.container.appendChild(this.canvas);var e=this;window.addEventListener("resize",function(){e.resize()},!1),this.canvas.addEventListener("click",function(t){var i=n(e.canvas,t),A=e.getCanvasSize();i.x>0&&i.x<64?e.previous():i.x>A.x-64&&i.x<A.x&&e.next()})},e.prototype.setCanvasSize=function(){var t=this.container.clientWidth,e=this.container.clientHeight;this.canvas.width=t,this.canvas.height=e},e.prototype.resize=function(){this.setCanvasSize(),0===this.transitionPercent&&this.drawImage(this.slides[this.currentSlideIndex])},e.prototype.loadSlides=function(e,i){function n(){i<e.length-1&&A.loadSlides(e,++i)}void 0===i&&(i=0);var A=this,s=new Image;s.onload=function(){var r=e[i].focus.toUpperCase().replace("-","_"),o=new t(s,a[r]);A.addSlide(o),0===i&&(o.show(),A.autoPlay&&A.start()),n()},s.onerror=function(){console.error("Unable to load image "+i+" src: "+e[i].src),n()},s.src=e[i].src},e}();