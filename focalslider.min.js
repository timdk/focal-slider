var FocalSlider=function(){function t(t,e){this.image=t,this.focalPoint=e,this.index=null,this.parent=null}function e(t){this.containerSelector=t.container,this.container=null,this.canvas=null,this.context=null,this.slides=[],this.currentSlideIndex=null,this.numSlides=0,this.slideDuration=t.slideDuration||5e3,this.autoPlay=t.autoPlay!==!1,this.transitionPercent=0,this.createCanvas(),t.slides&&t.slides.length>0&&this.loadSlides(t.slides)}function i(t,e){t.save(),t.globalAlpha=.8,t.drawImage(s,0,e.y/2-16,32,32),t.drawImage(a,e.x-32,e.y/2-16,32,32),t.restore()}function n(t,e){var i=t.getBoundingClientRect(),n=e.clientX-i.left,s=e.clientY-i.top;return{x:n,y:s}}var s=new Image;s.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA8UlEQVRYhd2X0QYCQRSG10pPkCRJz5QkXaQXSrJWkvREe5EkSdI7dLfyddFGRrszy5456WevZna/zxk7cyYIKg4QAhEwqPrbrvANr6TAWAvOh8TEF3zL9zyAqRb8nQSoacF3QEMKbq65mb0m/AA0teBHoCUFX1vgJ6AtBV/9MvwMdP4SvtSCB9rw2Ac8LBi7W96tZ49MsirMLFW4AT1piblF4upDYuEg0ZWWiCwSFx8SXv6MIgm9XbGkhMyhZEjYjmWZnsCQcGlMqu+KDAlbJWT6wpISCVC07YtK+Lmi5UikwEgcniORAkNvcEMiBvou85/zmmf/a5dcPQAAAABJRU5ErkJggg==";var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA7klEQVRYhe2X0QYCQRSGx0qXK0mPlGSlN1xJkqyeIF0mSZKeJRFfFy1t2m0OO2dmL/qvl++b3ePsP8YIAgyAFGhJnncaYATceGXlVQJIgDuf8SMBTErgfiQAA2wr4N4kYmAXWqIDHEJLdIGjRWLpQ+IUWqIHnJsgcbFILLQl+gKJeVMkotASs79EnmmVhAuzyBhjG7iHA8538tNfLadPVT5B3VdfFy5ZSDrDh2wl62xDQv6UhHCdboCsE6jBJa0o04LHwD4k3FZK10BbA26ATRB4QeLXxUQXXpAYl0hkXuAFiYT35VRn4AQSQ5R63hNnHGgduYs84gAAAABJRU5ErkJggg==";var r={TOP_LEFT:0,TOP_MIDDLEe:1,TOP_RIGHT:2,MIDDLE_LEFT:3,MIDDLE:4,MIDDLE_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_MIDDLE:7,BOTTOM_RIGHT:8},o=function(t){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();return t.prototype.show=function(){this.parent.showSlide(this)},e.prototype.addSlide=function(t){this.slides.push(t),this.numSlides=this.slides.length,t.parent=this,t.index=this.numSlides-1},e.prototype.showSlide=function(t){var e;void 0===t||null===t?(e=this.currentSlideIndex,t=this.slides[e]):"number"==typeof t?(e=t,t=this.slides[e]):e=t.index,this.drawImage(t),this.currentSlideIndex=e},e.prototype.next=function(){var t=this.slides[this.currentSlideIndex];++this.currentSlideIndex===this.numSlides&&(this.currentSlideIndex=0);var e=this.slides[this.currentSlideIndex];this.fadeTransition(t,e)},e.prototype.previous=function(){var t=this.slides[this.currentSlideIndex];--this.currentSlideIndex==-1&&(this.currentSlideIndex=this.numSlides-1);var e=this.slides[this.currentSlideIndex];this.fadeTransition(t,e)},e.prototype.start=function(t){"number"!=typeof t?t=this.slideDuration:this.slideDuration=t,this.timer=setInterval(this.next.bind(this),t)},e.prototype.stop=function(){clearInterval(this.timer),delete this.timer},e.prototype.restart=function(){this.stop(),this.start()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getContext=function(){return this.context||(this.context=this.canvas.getContext("2d")),this.context},e.prototype.getCanvasSize=function(){return{x:this.getCanvas().scrollWidth,y:this.getCanvas().scrollHeight}},e.prototype.fadeTransition=function(t,e){return this.transitionPercent>100?(this.transitionPercent=0,void(void 0!==this.timer&&this.restart())):(o(this.fadeTransition.bind(this,t,e)),this.drawImage(e,this.transitionPercent/100),this.drawImage(t,1-this.transitionPercent/100),void(this.transitionPercent+=4))},e.prototype.drawImage=function(t,e){void 0===e&&(e=1);var n,s,a=t.image.width,o=t.image.height,h=a/o,c=this.getCanvasSize(),d=c.x,l=c.y,u=d/l;u<h?(n=a*l/o,s=l):(n=d,s=o*d/a);var A=0,g=0;switch(t.focalPoint){case r.TOP_RIGHT:case r.MIDDLE_RIGHT:case r.BOTTOM_RIGHT:n>d&&(A=d-n);break;case r.TOP_MIDDLE:case r.MIDDLE:case r.BOTTOM_MIDDLE:n>d&&(A=(d-n)/2)}switch(t.focalPoint){case r.BOTTOM_LEFT:case r.BOTTOM_MIDDLE:case r.BOTTOM_RIGHT:s>l&&(g=l-s);break;case r.MIDDLE_LEFT:case r.MIDDLE:case r.MIDDLE_RIGHT:s>l&&(g=(l-s)/2)}var v=this.getContext();v.globalAlpha=e,v.drawImage(t.image,A,g,n,s),i(v,c)},e.prototype.createCanvas=function(t){t?this.containerSelector=t:t=this.containerSelector,this.container=document.querySelector(t),this.canvas=document.createElement("canvas"),this.setCanvasSize(),this.container.appendChild(this.canvas);var e=this;window.addEventListener("resize",function(){e.resize()},!1),this.canvas.addEventListener("click",function(t){if(0===e.transitionPercent){var i=n(e.canvas,t),s=e.getCanvasSize();i.x>0&&i.x<64?e.previous():i.x>s.x-64&&i.x<s.x&&e.next()}})},e.prototype.setCanvasSize=function(){var t=this.container.clientWidth,e=this.container.clientHeight;this.canvas.width=t,this.canvas.height=e},e.prototype.resize=function(){this.setCanvasSize(),0===this.transitionPercent&&this.drawImage(this.slides[this.currentSlideIndex])},e.prototype.loadSlides=function(e,i){function n(){i<e.length-1&&s.loadSlides(e,++i)}void 0===i&&(i=0);var s=this,a=new Image;a.onload=function(){var o=e[i].focus.toUpperCase().replace("-","_"),h=new t(a,r[o]);s.addSlide(h),0===i&&(h.show(),s.autoPlay&&s.start()),n()},a.onerror=function(){console.error("Unable to load image "+i+" src: "+e[i].src),n()},a.src=e[i].src},e}();